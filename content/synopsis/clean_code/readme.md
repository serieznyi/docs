# Чистый код. Создание, анализ и рефакторинг

## Глава 1. Чистый код

Каким должен быть "чистый код" ?

- Элегантным (его приятно читать)
- Хорошо решает одну задачу (**S**ingle **R**esponsibility **P**rinciple)
- Прямолинейным (Должен содержать только то, что необходимо)
- Код должен быть написан в такой форме, чтобы он хорошо читался людьми
- Тщательным (Код не должен содержать никаких очевидных возможностей для его улучшения)
- Протестированный (Имеет модульные тесты)
- Содержит простые абстракции
- Каждая функция делает примерно то, что вы ожидали

## Глава 2. Содержательные имена

### Имена должны передавать намерения программиста

Названия переменных не вызывают у нас вопросов о назначении переменных.

Не правильно
```
int d; // Прошедшее время
```

Правильно
```
int daysSinceModification;
```

### Избегайте дезинформации

* Не используйте слова со скрытыми значениями, отличными от предполагаемого.

```
int hp; // название ассоциируется с абревиатурой HP (Hewlett-Packard)
int aix; // название ассоциируется с Advanced Interactive eXecutive - UNIX-подобной операционной системой компании IBM. 
```

или

```
Map<Account> accountList; // название говорит о том, что переменная хранит список, хотя на самом деле это map 
```
В этом примере лучше подойдет имя accountGroup или даже просто accounts

* Остерегайтесь малозаметных различий в именах

```
Controller XYZControllerForEfficientHandlingOfStrings;
Controller XYZControllerForEfficientStorageOfStrings;
```

* Не используйте прописные `L` и `O` из-за их схожестки с `0` и `1`

```
int a = l;
if ( O == l )
a = O1;
else
l = 01;
```

### Используйте осмысленные различия

* Такая функция будет читаться намного лучше, если присвоить аргументам имена `source` и `destination`.

```
public static void copyChars(char a1[], char a2[]) {
  for (int i = 0; i < a1.length; i++) {
    a2[i] = a1[i];
  }
}
```

* Одно и тоже по смыслу, потому стоит использовать лишь одну форму.

```
Product product;
ProductData productData;
ProductInfo produtcInfo;

List<Account> getActiveAccount();
List<Account> getActiveAccounts();
List<Account> getActiveAccountInfo();

String theMessage;
String message;

float moneyAmountr;
float money;
```

### Используйте удобопроизносимые имена

Сложно произнести 

```
class DtaRcrd102 {
  private Date genymdhms;
  private Date modymdhms;
  private final String pszqint = "102";
};
```

Так лучше 

```
class Customer {
  private Date generationTimestamp;
  private Date modificationTimestamp;;
  private final String recordId = "102";
};
```

### Выбирайте имена, удобные для поиска

 - Однобуквенные имена могут использоваться ТОЛЬКО для локальных переменных в коротких методах. 
 - Длина имени должна соответствовать размеру его области видимости
 
 Сравните
 ```
for (int j=0; j<34; j++) {
  s += (t[j]*4)/5;
}
```

и

```
int realDaysPerIdealDay = 4;
const int WORK_DAYS_PER_WEEK = 5;
int sum = 0;
for (int j=0; j < NUMBER_OF_TASKS; j++) {
  int realTaskDays = taskEstimate[j] * realDaysPerIdealDay;
  int realTaskWeeks = (realdays / WORK_DAYS_PER_WEEK);
  sum += realTaskWeeks;
}
```

### Избегайте схем кодирования имен

 - Не указывайте тип переменной в названии переменной. В какой-то момент тип может сменится, а имя останется прежним 
 - Не используйте префиксы у членом классов. 
 - Не используйте префикс `I` у интерфейсов (IShapeFactory)
 
### Избегайте мысленных преобразований

Не заставляйте читателя мысленно преобразовывать ваши имена в другие, уже известные ему

Например использовать переменную `a` для счетчика циклов вместо традиционныхх `i`, `j`, `k`  
 
### Имена классов

 - Имена классов и объектов должны представлять собой существительные и их комбинации: Customer, WikiPage, Account и AddressParser. 
 - Старайтесь не использовать в именах классов такие слова, как Manager, Processor, Data или Info . 
 - Имя класса не должно быть глаголом.
 
### Имена методов

 - Имена методов представляют собой глаголы или глагольные словосочетания (postPayment , deletePage , save)
 - Методы чтения/записи и предикаты образуются из значения и префикса get , set и is согласно стандарту javabean
 - При перегрузке конструкторов используйте статические методы-фабрики с именами, описывающими аргументы
 ```
Complex fulcrumPoint = Complex.FromRealNumber(23.0);
```

### Избегайте остроумия

Не самое подходящее название для метода

```
eatMyShorts 1 ()
```

### Выберите одно слово для каждой концепции

Следующие названия эквивалентны в одном контексте

- `fetch`, `retrieve` и `get`
- `controller`, `manager` и `driver`

### Воздержитесь от каламбуров

?

### Используйте имена из пространства решения

Например имя AccountVisitor сообщит много полезной информации программисту, знакомому с паттерном «Посетитель» (Visitor)

### Используйте имена из пространства задачи

Если для того, что вы делаете, не существует подходящего термина из программирования, используйте имя из пространства задачи

### Добавьте содержательный контекст

Если переменные являются частью чегото больше - выделите это через префикс в названии или вынелите их в отдельный класс.

Было 
```
private void printGuessStatistics(char candidate. int count)
  ...
  String number;
  String verb;
  String pluralModifier;
  ...
}
```

стало 

```
public class GuessStatisticsMessage {
  private String number;
  private String verb;
  private String pluralModifier;

  public String make(char candidate, int count) {
  ...
  }
}
```

### Не добавляйте избыточный контекст

Если вы работаете над вымышленным приложением «Gas Station Deluxe», не стоит снабжать имя каждого класса префиксом GSD

## Глава 3. Функции

### Компактность!

Функции должны быть компактными. На сколько? В идеале не более 5 строк.

Функции не должны содержать вложенных структур, так как это приводит к их увеличению
Максимальный уровень отступов в функции не должен превышать одного-двух

### Правило одной операции

Функция должна выполнять только одну операцию. Она должна выполнять ее хорошо. И ничего другого она делать не должна. 

### Один уровень абстракции на функцию


### Команды switch

### Используйте содержательные имена

### Аргументы функций

### Избавьтесь от побочных эффектов

### Разделение команд и запросов

### Используйте исключения вместо возвращения кодов ошибок





